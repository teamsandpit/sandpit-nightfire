//
// Sandpit Nightfire
//
// (http://www.teamsandpit.com/)
//

#include "extdll.h"
#include "util.h"

typedef void (FAR *LINK_ENTITY_FUNC)(entvars_t *);

extern HINSTANCE h_Library;

#define LINK_ENTITY_TO_FUNC(mapClassName) \
	extern "C" _declspec( dllexport ) void mapClassName( entvars_t *pev ); \
	void mapClassName( entvars_t *pev ) { \
		static LINK_ENTITY_FUNC otherClassName = NULL; \
		static int skip_this = 0; \
		if (skip_this) return; \
		if (otherClassName == NULL) \
			otherClassName = (LINK_ENTITY_FUNC)GetProcAddress(h_Library, #mapClassName); \
		if (otherClassName == NULL) { \
			skip_this = 1; return; \
		} \
		(*otherClassName)(pev); }


LINK_ENTITY_TO_FUNC(DelayedUse);
LINK_ENTITY_TO_FUNC(aiscripted_sequence);
LINK_ENTITY_TO_FUNC(ambient_generic);
LINK_ENTITY_TO_FUNC(ambient_lightning);
LINK_ENTITY_TO_FUNC(ammo_bondmine);
LINK_ENTITY_TO_FUNC(ammo_commando);
LINK_ENTITY_TO_FUNC(ammo_darts);
LINK_ENTITY_TO_FUNC(ammo_flashgrenade);
LINK_ENTITY_TO_FUNC(ammo_fraggrenade);
LINK_ENTITY_TO_FUNC(ammo_grenadelauncher);
LINK_ENTITY_TO_FUNC(ammo_kowloon);
LINK_ENTITY_TO_FUNC(ammo_mini);
LINK_ENTITY_TO_FUNC(ammo_mp9);
LINK_ENTITY_TO_FUNC(ammo_p99);
LINK_ENTITY_TO_FUNC(ammo_pdw90);
LINK_ENTITY_TO_FUNC(ammo_pp9);
LINK_ENTITY_TO_FUNC(ammo_raptor);
LINK_ENTITY_TO_FUNC(ammo_rocketlauncher);
LINK_ENTITY_TO_FUNC(ammo_shotgun);
LINK_ENTITY_TO_FUNC(ammo_smokegrenade);
LINK_ENTITY_TO_FUNC(ammo_sniper);
LINK_ENTITY_TO_FUNC(ammo_up11);
LINK_ENTITY_TO_FUNC(beam);
LINK_ENTITY_TO_FUNC(bodyque);
LINK_ENTITY_TO_FUNC(button_target);
LINK_ENTITY_TO_FUNC(character_bondmine);
LINK_ENTITY_TO_FUNC(character_cine2_hvyweapons);
LINK_ENTITY_TO_FUNC(character_cine2_scientist);
LINK_ENTITY_TO_FUNC(character_cine2_slave);
LINK_ENTITY_TO_FUNC(character_cine3_barney);
LINK_ENTITY_TO_FUNC(character_cine3_scientist);
LINK_ENTITY_TO_FUNC(character_cine_barney);
LINK_ENTITY_TO_FUNC(character_cine_panther);
LINK_ENTITY_TO_FUNC(character_cine_scientist);
LINK_ENTITY_TO_FUNC(character_hevsuit_dead);
LINK_ENTITY_TO_FUNC(character_mortar);
LINK_ENTITY_TO_FUNC(charactermaker);
LINK_ENTITY_TO_FUNC(cine_blood);
LINK_ENTITY_TO_FUNC(ctf_hudicon);
LINK_ENTITY_TO_FUNC(cycler);
LINK_ENTITY_TO_FUNC(cycler_prdroid);
LINK_ENTITY_TO_FUNC(cycler_sprite);
LINK_ENTITY_TO_FUNC(cycler_weapon);
LINK_ENTITY_TO_FUNC(cycler_wreckage);
LINK_ENTITY_TO_FUNC(dart_tip);
LINK_ENTITY_TO_FUNC(deadsnowguard);
LINK_ENTITY_TO_FUNC(dumb_rocket);
LINK_ENTITY_TO_FUNC(ei_grenade);
LINK_ENTITY_TO_FUNC(enemy_attackcopter);
LINK_ENTITY_TO_FUNC(enemy_drake);
LINK_ENTITY_TO_FUNC(enemy_generic);
LINK_ENTITY_TO_FUNC(enemy_helicopter);
LINK_ENTITY_TO_FUNC(enemy_miniturret);
LINK_ENTITY_TO_FUNC(enemy_ninja);
LINK_ENTITY_TO_FUNC(enemy_pathvan);
LINK_ENTITY_TO_FUNC(enemy_rocket);
LINK_ENTITY_TO_FUNC(enemy_ronin_turret);
LINK_ENTITY_TO_FUNC(enemy_rook_boss);
LINK_ENTITY_TO_FUNC(enemy_scubasteve);
LINK_ENTITY_TO_FUNC(enemy_searchlight);
LINK_ENTITY_TO_FUNC(enemy_searchlight_target);
LINK_ENTITY_TO_FUNC(enemy_sentry);
LINK_ENTITY_TO_FUNC(enemy_turret);
LINK_ENTITY_TO_FUNC(enemy_videocamera);
LINK_ENTITY_TO_FUNC(enemy_videocamera_target);
LINK_ENTITY_TO_FUNC(entity_light);
LINK_ENTITY_TO_FUNC(env_beam);
LINK_ENTITY_TO_FUNC(env_beverage);
LINK_ENTITY_TO_FUNC(env_blood);
LINK_ENTITY_TO_FUNC(env_deathcamera);
LINK_ENTITY_TO_FUNC(env_debris);
LINK_ENTITY_TO_FUNC(env_drawwater);
LINK_ENTITY_TO_FUNC(env_explosion);
LINK_ENTITY_TO_FUNC(env_fade);
LINK_ENTITY_TO_FUNC(env_fog);
LINK_ENTITY_TO_FUNC(env_global);
LINK_ENTITY_TO_FUNC(env_glow);
LINK_ENTITY_TO_FUNC(env_laser);
LINK_ENTITY_TO_FUNC(env_lightning);
LINK_ENTITY_TO_FUNC(env_message);
LINK_ENTITY_TO_FUNC(env_rain);
LINK_ENTITY_TO_FUNC(env_render);
LINK_ENTITY_TO_FUNC(env_scoring);
LINK_ENTITY_TO_FUNC(env_shake);
LINK_ENTITY_TO_FUNC(env_shooter);
LINK_ENTITY_TO_FUNC(env_snow);
LINK_ENTITY_TO_FUNC(env_sound);
LINK_ENTITY_TO_FUNC(env_spark);
LINK_ENTITY_TO_FUNC(env_sprite);
LINK_ENTITY_TO_FUNC(env_virtualexplosion);
LINK_ENTITY_TO_FUNC(fireanddie);
LINK_ENTITY_TO_FUNC(flash_grenade);
LINK_ENTITY_TO_FUNC(frag_grenade);
LINK_ENTITY_TO_FUNC(func_balancebeam);
LINK_ENTITY_TO_FUNC(func_breakable);
LINK_ENTITY_TO_FUNC(func_button);
LINK_ENTITY_TO_FUNC(func_characterclip);
LINK_ENTITY_TO_FUNC(func_climbable);
LINK_ENTITY_TO_FUNC(func_conveyor);
LINK_ENTITY_TO_FUNC(func_door);
LINK_ENTITY_TO_FUNC(func_door_rotating);
LINK_ENTITY_TO_FUNC(func_friction);
LINK_ENTITY_TO_FUNC(func_guntarget);
LINK_ENTITY_TO_FUNC(func_handoverhand);
LINK_ENTITY_TO_FUNC(func_healthcharger);
LINK_ENTITY_TO_FUNC(func_huggable);
LINK_ENTITY_TO_FUNC(func_illusionary);
LINK_ENTITY_TO_FUNC(func_ladder);
LINK_ENTITY_TO_FUNC(func_ledgehang);
LINK_ENTITY_TO_FUNC(func_modeltrainclip);
LINK_ENTITY_TO_FUNC(func_monsterclip);
LINK_ENTITY_TO_FUNC(func_mortar_field);
LINK_ENTITY_TO_FUNC(func_pathtruck_clip);
LINK_ENTITY_TO_FUNC(func_pathvehicle_clip);
LINK_ENTITY_TO_FUNC(func_pendulum);
LINK_ENTITY_TO_FUNC(func_plat);
LINK_ENTITY_TO_FUNC(func_platrot);
LINK_ENTITY_TO_FUNC(func_pushable);
LINK_ENTITY_TO_FUNC(func_rain);
LINK_ENTITY_TO_FUNC(func_recharge);
LINK_ENTITY_TO_FUNC(func_ropeclimb);
LINK_ENTITY_TO_FUNC(func_rot_button);
LINK_ENTITY_TO_FUNC(func_rotating);
LINK_ENTITY_TO_FUNC(func_snow);
LINK_ENTITY_TO_FUNC(func_tank);
LINK_ENTITY_TO_FUNC(func_tankcontrols);
LINK_ENTITY_TO_FUNC(func_tanklaser);
LINK_ENTITY_TO_FUNC(func_tankmortar);
LINK_ENTITY_TO_FUNC(func_tankrocket);
LINK_ENTITY_TO_FUNC(func_trackautochange);
LINK_ENTITY_TO_FUNC(func_trackchange);
LINK_ENTITY_TO_FUNC(func_tracktrain);
LINK_ENTITY_TO_FUNC(func_train);
LINK_ENTITY_TO_FUNC(func_traincontrols);
LINK_ENTITY_TO_FUNC(func_wall);
LINK_ENTITY_TO_FUNC(func_wall_toggle);
LINK_ENTITY_TO_FUNC(func_water);
LINK_ENTITY_TO_FUNC(gadget_nightvision);
LINK_ENTITY_TO_FUNC(game_counter);
LINK_ENTITY_TO_FUNC(game_counter_set);
LINK_ENTITY_TO_FUNC(game_end);
LINK_ENTITY_TO_FUNC(game_player_equip);
LINK_ENTITY_TO_FUNC(game_player_hurt);
LINK_ENTITY_TO_FUNC(game_player_team);
LINK_ENTITY_TO_FUNC(game_score);
LINK_ENTITY_TO_FUNC(game_team_master);
LINK_ENTITY_TO_FUNC(game_team_set);
LINK_ENTITY_TO_FUNC(game_text);
LINK_ENTITY_TO_FUNC(game_zone_player);
LINK_ENTITY_TO_FUNC(gibshooter);
LINK_ENTITY_TO_FUNC(grapple_tip);
LINK_ENTITY_TO_FUNC(grenade);
LINK_ENTITY_TO_FUNC(guard_rocket);
LINK_ENTITY_TO_FUNC(hvr_rocket);
LINK_ENTITY_TO_FUNC(info_aievent);
LINK_ENTITY_TO_FUNC(info_camera);
LINK_ENTITY_TO_FUNC(info_camera_node);
LINK_ENTITY_TO_FUNC(info_camera_viewnode);
LINK_ENTITY_TO_FUNC(info_characterguntarget);
LINK_ENTITY_TO_FUNC(info_ctfdetect);
LINK_ENTITY_TO_FUNC(info_ctfspawn);
LINK_ENTITY_TO_FUNC(info_ctfspawn_powerup);
LINK_ENTITY_TO_FUNC(info_drive_target);
LINK_ENTITY_TO_FUNC(info_intermission);
LINK_ENTITY_TO_FUNC(info_landmark);
LINK_ENTITY_TO_FUNC(info_node);
LINK_ENTITY_TO_FUNC(info_node_air);
LINK_ENTITY_TO_FUNC(info_null);
LINK_ENTITY_TO_FUNC(info_picture_target);
LINK_ENTITY_TO_FUNC(info_player_deathmatch);
LINK_ENTITY_TO_FUNC(info_player_start);
LINK_ENTITY_TO_FUNC(info_rain);
LINK_ENTITY_TO_FUNC(info_snow);
LINK_ENTITY_TO_FUNC(info_target);
LINK_ENTITY_TO_FUNC(info_teleport_destination);
LINK_ENTITY_TO_FUNC(infodecal);
LINK_ENTITY_TO_FUNC(item_antidote);
LINK_ENTITY_TO_FUNC(item_armor_plate);
LINK_ENTITY_TO_FUNC(item_armor_vest);
LINK_ENTITY_TO_FUNC(item_battery);
LINK_ENTITY_TO_FUNC(item_breakable);
LINK_ENTITY_TO_FUNC(item_ctfaccelerator);
LINK_ENTITY_TO_FUNC(item_ctfbackpack);
LINK_ENTITY_TO_FUNC(item_ctfbase);
LINK_ENTITY_TO_FUNC(item_ctfflag);
LINK_ENTITY_TO_FUNC(item_ctfportablebattery);
LINK_ENTITY_TO_FUNC(item_ctfregeneration);
LINK_ENTITY_TO_FUNC(item_ctfspeed);
LINK_ENTITY_TO_FUNC(item_drivetarget);
LINK_ENTITY_TO_FUNC(item_explosive);
LINK_ENTITY_TO_FUNC(item_explosive_planted);
LINK_ENTITY_TO_FUNC(item_generic);
LINK_ENTITY_TO_FUNC(item_genericfalling);
LINK_ENTITY_TO_FUNC(item_grappletarget);
LINK_ENTITY_TO_FUNC(item_key);
LINK_ENTITY_TO_FUNC(item_lasertarget);
LINK_ENTITY_TO_FUNC(item_locktarget);
LINK_ENTITY_TO_FUNC(item_longjump);
LINK_ENTITY_TO_FUNC(item_model_follow);
LINK_ENTITY_TO_FUNC(item_padlock);
LINK_ENTITY_TO_FUNC(item_scubasuit);
LINK_ENTITY_TO_FUNC(item_security);
LINK_ENTITY_TO_FUNC(item_sodacan);
LINK_ENTITY_TO_FUNC(item_space_suit);
LINK_ENTITY_TO_FUNC(james_bond_test);
LINK_ENTITY_TO_FUNC(laser_beam);
LINK_ENTITY_TO_FUNC(light);
LINK_ENTITY_TO_FUNC(light_environment);
LINK_ENTITY_TO_FUNC(light_spot);
LINK_ENTITY_TO_FUNC(momentary_door);
LINK_ENTITY_TO_FUNC(momentary_rot_button);
LINK_ENTITY_TO_FUNC(monster_furniture);
LINK_ENTITY_TO_FUNC(monster_generic);
LINK_ENTITY_TO_FUNC(monster_koi);
LINK_ENTITY_TO_FUNC(monstermaker);
LINK_ENTITY_TO_FUNC(multi_kill_manager);
LINK_ENTITY_TO_FUNC(multi_manager);
LINK_ENTITY_TO_FUNC(multisource);
LINK_ENTITY_TO_FUNC(node_viewer);
LINK_ENTITY_TO_FUNC(node_viewer_fly);
LINK_ENTITY_TO_FUNC(node_viewer_human);
LINK_ENTITY_TO_FUNC(node_viewer_large);
LINK_ENTITY_TO_FUNC(npc_aigeneric);
LINK_ENTITY_TO_FUNC(npc_bird);
LINK_ENTITY_TO_FUNC(npc_bird_flock);
LINK_ENTITY_TO_FUNC(npc_generic);
LINK_ENTITY_TO_FUNC(npc_koi);
LINK_ENTITY_TO_FUNC(npc_modeltrain);
LINK_ENTITY_TO_FUNC(npc_pathgeneric);
LINK_ENTITY_TO_FUNC(npc_pathtruck);
LINK_ENTITY_TO_FUNC(npc_pathvehicle);
LINK_ENTITY_TO_FUNC(particle_emitter);
LINK_ENTITY_TO_FUNC(path_corner);
LINK_ENTITY_TO_FUNC(path_track);
LINK_ENTITY_TO_FUNC(physics_lantern);
LINK_ENTITY_TO_FUNC(player);
LINK_ENTITY_TO_FUNC(player_loadsaved);
LINK_ENTITY_TO_FUNC(player_weaponstrip);
LINK_ENTITY_TO_FUNC(scripted_sentence);
LINK_ENTITY_TO_FUNC(scripted_sequence);
LINK_ENTITY_TO_FUNC(smart_rocket);
LINK_ENTITY_TO_FUNC(smoke_grenade);
LINK_ENTITY_TO_FUNC(soundent);
LINK_ENTITY_TO_FUNC(spark_shower);
LINK_ENTITY_TO_FUNC(speaker);
LINK_ENTITY_TO_FUNC(target_cdaudio);
LINK_ENTITY_TO_FUNC(test_effect);
LINK_ENTITY_TO_FUNC(testhull);
LINK_ENTITY_TO_FUNC(trigger);
LINK_ENTITY_TO_FUNC(trigger_acfiremissile);
LINK_ENTITY_TO_FUNC(trigger_auto);
LINK_ENTITY_TO_FUNC(trigger_autosave);
LINK_ENTITY_TO_FUNC(trigger_bit);
LINK_ENTITY_TO_FUNC(trigger_bit_counter);
LINK_ENTITY_TO_FUNC(trigger_bondmoment);
LINK_ENTITY_TO_FUNC(trigger_bondsecret);
LINK_ENTITY_TO_FUNC(trigger_camera);
LINK_ENTITY_TO_FUNC(trigger_cdaudio);
LINK_ENTITY_TO_FUNC(trigger_changecharacter);
LINK_ENTITY_TO_FUNC(trigger_changelevel);
LINK_ENTITY_TO_FUNC(trigger_changelevelicon);
LINK_ENTITY_TO_FUNC(trigger_changesequence);
LINK_ENTITY_TO_FUNC(trigger_changetarget);
LINK_ENTITY_TO_FUNC(trigger_counter);
LINK_ENTITY_TO_FUNC(trigger_ctfscore);
LINK_ENTITY_TO_FUNC(trigger_eject);
LINK_ENTITY_TO_FUNC(trigger_endcinematic);
LINK_ENTITY_TO_FUNC(trigger_endgame);
LINK_ENTITY_TO_FUNC(trigger_endsection);
LINK_ENTITY_TO_FUNC(trigger_gravity);
LINK_ENTITY_TO_FUNC(trigger_hudmessage);
LINK_ENTITY_TO_FUNC(trigger_hurt);
LINK_ENTITY_TO_FUNC(trigger_multiple);
LINK_ENTITY_TO_FUNC(trigger_music);
LINK_ENTITY_TO_FUNC(trigger_objective);
LINK_ENTITY_TO_FUNC(trigger_once);
LINK_ENTITY_TO_FUNC(trigger_pathcamera);
LINK_ENTITY_TO_FUNC(trigger_playerfreeze);
LINK_ENTITY_TO_FUNC(trigger_playmovie);
LINK_ENTITY_TO_FUNC(trigger_push);
LINK_ENTITY_TO_FUNC(trigger_random);
LINK_ENTITY_TO_FUNC(trigger_relay);
LINK_ENTITY_TO_FUNC(trigger_sneak);
LINK_ENTITY_TO_FUNC(trigger_teleport);
LINK_ENTITY_TO_FUNC(trigger_to_first);
LINK_ENTITY_TO_FUNC(trigger_togglehud);
LINK_ENTITY_TO_FUNC(trigger_transition);
LINK_ENTITY_TO_FUNC(up11_dart);
LINK_ENTITY_TO_FUNC(virtual_enemy_snowguard);
LINK_ENTITY_TO_FUNC(virtual_npc_zoe);
LINK_ENTITY_TO_FUNC(weapon_bondmine);
LINK_ENTITY_TO_FUNC(weapon_commando);
LINK_ENTITY_TO_FUNC(weapon_dukes);
LINK_ENTITY_TO_FUNC(weapon_flashgrenade);
LINK_ENTITY_TO_FUNC(weapon_fraggrenade);
LINK_ENTITY_TO_FUNC(weapon_frinesi);
LINK_ENTITY_TO_FUNC(weapon_grapple);
LINK_ENTITY_TO_FUNC(weapon_grenadelauncher);
LINK_ENTITY_TO_FUNC(weapon_kowloon);
LINK_ENTITY_TO_FUNC(weapon_l96a1);
LINK_ENTITY_TO_FUNC(weapon_l96a1_winter);
LINK_ENTITY_TO_FUNC(weapon_laserrifle);
LINK_ENTITY_TO_FUNC(weapon_lighter);
LINK_ENTITY_TO_FUNC(weapon_minigun);
LINK_ENTITY_TO_FUNC(weapon_mp9);
LINK_ENTITY_TO_FUNC(weapon_mp9_silenced);
LINK_ENTITY_TO_FUNC(weapon_pda);
LINK_ENTITY_TO_FUNC(weapon_pdw90);
LINK_ENTITY_TO_FUNC(weapon_pen);
LINK_ENTITY_TO_FUNC(weapon_pp9);
LINK_ENTITY_TO_FUNC(weapon_qworm);
LINK_ENTITY_TO_FUNC(weapon_raptor);
LINK_ENTITY_TO_FUNC(weapon_rocketlauncher);
LINK_ENTITY_TO_FUNC(weapon_ronin);
LINK_ENTITY_TO_FUNC(weapon_smokegrenade);
LINK_ENTITY_TO_FUNC(weapon_taser);
LINK_ENTITY_TO_FUNC(weapon_up11);
LINK_ENTITY_TO_FUNC(weapon_watch);
LINK_ENTITY_TO_FUNC(weaponbag);
LINK_ENTITY_TO_FUNC(world_items);
LINK_ENTITY_TO_FUNC(worldspawn);
LINK_ENTITY_TO_FUNC(xrayskeleton);